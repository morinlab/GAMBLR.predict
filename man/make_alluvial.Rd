% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plotting.R
\name{make_alluvial}
\alias{make_alluvial}
\title{Create an Alluvial Plot Comparing Original and Predicted Classifications}
\usage{
make_alluvial(
  optimized,
  count_excluded_as_other = FALSE,
  title = "",
  group_order = NULL,
  add_accuracy_to_title = TRUE,
  accuracy_per_group = TRUE,
  accuracy_type = "sensitivity",
  truth_name = "Lymphgen",
  truth_column = "lymphgen",
  pred_name = "DLBCLone",
  pred_column = "predicted_label_optimized",
  nudge = 0.03,
  box_nudge = 0.15,
  min_flip_n = 10,
  add_percent = TRUE,
  add_unclass_rate = TRUE,
  denom = 20,
  label_size = 3,
  label_lock_y = TRUE,
  label_line_flip_colour = TRUE,
  label_box_flip_colour = TRUE,
  concordant_label_relative_pos = 0.5,
  verbose = FALSE
)
}
\arguments{
\item{optimized}{List containing prediction results and metadata, typically output from a DLBCLone optimization function.}

\item{count_excluded_as_other}{Logical; if TRUE, samples excluded due to missing features are counted as "Other" in the plot.}

\item{title}{Plot title (default: empty string).}

\item{group_order}{Character vector specifying the order of groups/classes for axes and coloring.}

\item{add_accuracy_to_title}{Logical; if TRUE, adds accuracy/concordance rate to the plot title.}

\item{accuracy_per_group}{Logical; if TRUE, computes and displays per-group accuracy.}

\item{accuracy_type}{Type of accuracy to report (default: "sensitivity").}

\item{nudge}{Amount to nudge labels horizontally (default: 0.03).}

\item{box_nudge}{Amount to nudge label boxes (default: 0.15).}

\item{min_flip_n}{Minimum number of samples for a flow to be labeled (default: 10).}

\item{add_percent}{Logical; if TRUE, adds percent concordance to labels.}

\item{add_unclass_rate}{Logical; if TRUE, adds unclassified rate annotation to the plot.}

\item{denom}{Denominator for stratum/flow width scaling (default: 20).}

\item{label_size}{Size of label text (default: 3).}

\item{label_lock_y}{Logical; if TRUE, locks label movement to the x-axis only.}

\item{label_line_flip_colour}{Logical; controls color assignment for label lines.}

\item{label_box_flip_colour}{Logical; controls color assignment for label boxes.}

\item{concordant_label_relative_pos}{Position for concordant labels: 0 (left), 0.5 (middle), or 1 (right).}

\item{pred}{Name of the column in predictions to use for the predicted class (default: "predicted_label_optimized").}

\item{original_name}{Name for the original class column (default: "Lymphgen").}

\item{new_name}{Name for the predicted class column (default: "DLBCLone").}
}
\value{
A ggplot2 object representing the alluvial plot.
}
\description{
This function generates a detailed alluvial plot to visualize the concordance and discordance between original (e.g., Lymphgen) and predicted (e.g., DLBCLone) class assignments for samples.
It supports annotation of concordance rates, per-group accuracy, unclassified rates, and flexible labeling and coloring options.
}
\details{
\itemize{
\item Visualizes flows between original and predicted classes, highlighting concordant and discordant assignments.
\item Annotates concordance rate, per-group accuracy, and unclassified rate as specified.
\item Supports flexible labeling, coloring, and axis ordering for publication-quality plots.
}
}
\examples{
# Example usage:
# make_alluvial(optimized_result)

}
