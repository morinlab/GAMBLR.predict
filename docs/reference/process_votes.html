<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Process KNN Vote Strings and Scores for Classification — process_votes • GAMBLR.predict</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Process KNN Vote Strings and Scores for Classification — process_votes"><meta name="description" content='This function processes the raw neighbor label strings and
weighted vote scores from k-nearest neighbor (KNN) classification
results.
It computes per-class neighbor counts, weighted scores, and
identifies the top group by count and score for each sample.
The function also supports custom logic for handling the
"Other" class, including vote multipliers and purity requirements.
NOTE: This is a helper function and is not intended to be
called directly by the user'><meta property="og:description" content='This function processes the raw neighbor label strings and
weighted vote scores from k-nearest neighbor (KNN) classification
results.
It computes per-class neighbor counts, weighted scores, and
identifies the top group by count and score for each sample.
The function also supports custom logic for handling the
"Other" class, including vote multipliers and purity requirements.
NOTE: This is a helper function and is not intended to be
called directly by the user'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GAMBLR.predict</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/index.html">DLBCLone</a></li>
    <li><a class="dropdown-item" href="../articles/umap.html">DLBCLone Functions — UMAP</a></li>
    <li><a class="dropdown-item" href="../articles/DLBCLone_optimize_params.html">DLBCLone Functions — Optimizing Parameters</a></li>
    <li><a class="dropdown-item" href="../articles/DLBCLone_stored.html">DLBCLone Functions — DLBCLone Model Management</a></li>
    <li><a class="dropdown-item" href="../articles/predict_samples.html">UNKNOWN TITLE</a></li>
    <li><a class="dropdown-item" href="../articles/full_walkthrough.html">DLBCLone Full Walkthrough of Associated Functions</a></li>
    <li><a class="dropdown-item" href="../articles/validation.html">DLBCLone — Validation Data Generation and Example</a></li>
    <li><a class="dropdown-item" href="../articles/DLBCLone_KNN.html">DLBCLone Functions — K-Nearest Neighbors</a></li>
    <li><a class="dropdown-item" href="../articles/DLBCLone_mixture_model.html">DLBCLone Functions — Gaussian Mixture Model</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Process KNN Vote Strings and Scores for Classification</h1>

      <div class="d-none name"><code>process_votes.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function processes the raw neighbor label strings and
weighted vote scores from k-nearest neighbor (KNN) classification
results.
It computes per-class neighbor counts, weighted scores, and
identifies the top group by count and score for each sample.
The function also supports custom logic for handling the
"Other" class, including vote multipliers and purity requirements.
NOTE: This is a helper function and is not intended to be
called directly by the user</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">process_votes</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  raw_col <span class="op">=</span> <span class="st">"label"</span>,</span>
<span>  group_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EZB"</span>, <span class="st">"MCD"</span>, <span class="st">"ST2"</span>, <span class="st">"BN2"</span>, <span class="st">"N1"</span>, <span class="st">"Other"</span><span class="op">)</span>,</span>
<span>  vote_labels_col <span class="op">=</span> <span class="st">"vote_labels"</span>,</span>
<span>  weighted_votes_col <span class="op">=</span> <span class="st">"weighted_votes"</span>,</span>
<span>  <span class="va">k</span>,</span>
<span>  other_vote_multiplier <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  score_purity_requirement <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  other_class <span class="op">=</span> <span class="st">"Other"</span>,</span>
<span>  optimize_for_other <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  debug <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>Data frame containing kNN results, including columns
with neighbor labels and weighted votes.</p></dd>


<dt id="arg-raw-col">raw_col<a class="anchor" aria-label="anchor" href="#arg-raw-col"></a></dt>
<dd><p>Name of the column containing the comma-separated
neighbor labels (default: "label").</p></dd>


<dt id="arg-group-labels">group_labels<a class="anchor" aria-label="anchor" href="#arg-group-labels"></a></dt>
<dd><p>Character vector of all possible class labels
to consider (default: c("EZB", "MCD", "ST2", "BN2", "N1", "Other")).</p></dd>


<dt id="arg-vote-labels-col">vote_labels_col<a class="anchor" aria-label="anchor" href="#arg-vote-labels-col"></a></dt>
<dd><p>Name of the column containing the
comma-separated neighbor labels for weighted votes (default: "vote_labels").</p></dd>


<dt id="arg-weighted-votes-col">weighted_votes_col<a class="anchor" aria-label="anchor" href="#arg-weighted-votes-col"></a></dt>
<dd><p>Name of the column containing the
comma-separated weighted votes (default: "weighted_votes").</p></dd>


<dt id="arg-k">k<a class="anchor" aria-label="anchor" href="#arg-k"></a></dt>
<dd><p>Number of neighbors used in kNN (required).</p></dd>


<dt id="arg-other-vote-multiplier">other_vote_multiplier<a class="anchor" aria-label="anchor" href="#arg-other-vote-multiplier"></a></dt>
<dd><p>Multiplier for the "Other" class
when determining if a sample should be reclassified as "Other" (default: 2).</p></dd>


<dt id="arg-score-purity-requirement">score_purity_requirement<a class="anchor" aria-label="anchor" href="#arg-score-purity-requirement"></a></dt>
<dd><p>Minimum ratio of top group score
to "Other" score to assign a sample to the top group (default: 1).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Data frame with additional columns for per-class neighbor
counts, scores, top group assignments, and summary statistics for
each sample.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<ul><li><p>Computes the number of neighbors for each class and the sum of
weighted votes per class.</p></li>
<li><p>Identifies the top group by count and by weighted score, and
applies custom logic for the "Other" class if present.</p></li>
<li><p>Adds columns for counts, scores, top group, top group score,
score ratios, and optimized group assignments.</p></li>
<li><p>Designed for downstream use in DLBCLone and similar kNN-based
classification workflows.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example usage:</span></span></span>
<span class="r-in"><span><span class="co"># result &lt;- process_votes(knn_output_df, k = 7)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kostiantyn Dreval.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

