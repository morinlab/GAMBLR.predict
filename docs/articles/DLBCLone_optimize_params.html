<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>DLBCLone Functions - Optimizing Parameters • GAMBLR.predict</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="DLBCLone_optimize_params_files/libs/quarto-html/popper.min.js"></script><script src="DLBCLone_optimize_params_files/libs/quarto-html/tippy.umd.min.js"></script><link href="DLBCLone_optimize_params_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="DLBCLone_optimize_params_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="DLBCLone Functions - Optimizing Parameters">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GAMBLR.predict</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/index.html">DLBCLone</a></li>
    <li><a class="dropdown-item" href="../articles/umap.html">DLBCLone Functions - UMAP</a></li>
    <li><a class="dropdown-item" href="../articles/DLBCLone_optimize_params.html">DLBCLone Functions - Optimizing Parameters</a></li>
    <li><a class="dropdown-item" href="../articles/DLBCLone_stored.html">DLBCLone Functions - DLBCLone Model Management</a></li>
    <li><a class="dropdown-item" href="../articles/predict_samples.html">DLBCLone Functions - Predicting classes with DLBCLone_predict</a></li>
    <li><a class="dropdown-item" href="../articles/full_walkthrough.html">DLBCLone Full Walkthrough of Associated Functions</a></li>
    <li><a class="dropdown-item" href="../articles/validation.html">DLBCLone Validation Data Generation and Example</a></li>
    <li><a class="dropdown-item" href="../articles/DLBCLone_KNN.html">DLBCLone Functions - K-Nearest Neighbors</a></li>
    <li><a class="dropdown-item" href="../articles/DLBCLone_mixture_model.html">DLBCLone Functions - Gaussian Mixture Model</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>DLBCLone Functions - Optimizing Parameters</h1>





      <div class="d-none name"><code></code></div>
    </div>






    <section class="section level3"><h3 id="overview-of-function">Overview of function<a class="anchor" aria-label="anchor" href="#overview-of-function"></a>
</h3>
<p>The <code>DLBCLone_optimize_params</code> function tunes the K value and a few thresholds based on the training data, working to maximize balanced accuracy or (optionally) another metric.</p>
<p><code>combined_mutation_status_df</code> feature matrix data frame with one row per sample and one column per mutation</p>
<p><code>metadata_df</code> data frame of metadata with one row per sample and three required columns: sample_id, dataset and the column containing the “truth” lable, which defaults to lymphgen</p>
<p><code>umap_out</code> the output of <code>make_and_annotate_umap</code></p>
<p><code>truth_classes</code> vector of classes to use for training and testing (LymphGen default: c(“EZB”, “MCD”, “ST2”, “N1”, “BN2”, “Other”))</p>
<p><code>min_k</code> lowest k in the range of values to try for KNN (default: 3)</p>
<p><code>max_k</code> highest k in the range of values to try for KNN (default: 33)</p>
</section><section class="section level3"><h3 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h3>
<p>Let’s assume we are generally happy with the separation of samples in this latent representation. We can use <code>DLBCLone_optimize_params</code> to pick a combination of k (number of neighbors) and a few thresholds to categorize each sample based on its location and proximity to other points in the UMAP. Here, we give the original UMAP produced by <code>make_and_annotate_umap</code> and not the repojected UMAP, because this function will perform the sample-by-sample projection for us. Optimize for other will be set to TRUE as we are interested in high confidence predictions that are less likely to actually be “Other”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">best_opt_model</span> <span class="op">=</span> <span class="fu"><a href="../reference/DLBCLone_optimize_params.html">DLBCLone_optimize_params</a></span><span class="op">(</span>  </span>
<span>  <span class="co">#mu_everything$features, </span></span>
<span>  metadata_df <span class="op">=</span> <span class="va">dlbcl_meta_clean</span>,</span>
<span>  umap_out <span class="op">=</span> <span class="va">mu_everything</span>,</span>
<span>  truth_classes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MCD"</span>,<span class="st">"EZB"</span>,<span class="st">"BN2"</span>,<span class="st">"N1"</span>,<span class="st">"ST2"</span>,<span class="st">"Other"</span><span class="op">)</span>,</span>
<span>  min_k<span class="op">=</span><span class="fl">5</span>,</span>
<span>  max_k<span class="op">=</span><span class="fl">13</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">best_opt_model</span><span class="op">$</span><span class="va">best_params</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 1%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 2%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">k</th>
<th style="text-align: right;">threshold</th>
<th style="text-align: left;">use_weights</th>
<th style="text-align: right;">optimized_accuracy</th>
<th style="text-align: right;">overall_accuracy</th>
<th style="text-align: right;">mean_balanced_accuracy</th>
<th style="text-align: right;">sensitivity</th>
<th style="text-align: right;">N1_sn</th>
<th style="text-align: right;">BN2_sn</th>
<th style="text-align: right;">ST2_sn</th>
<th style="text-align: right;">BN2_bacc</th>
<th style="text-align: right;">MCD_bacc</th>
<th style="text-align: right;">EZB_bacc</th>
<th style="text-align: right;">A53_bacc</th>
<th style="text-align: right;">Other_bacc</th>
<th style="text-align: right;">C1_bacc</th>
<th style="text-align: right;">C2_bacc</th>
<th style="text-align: right;">C3_bacc</th>
<th style="text-align: right;">C4_bacc</th>
<th style="text-align: right;">C5_bacc</th>
<th style="text-align: right;">ST2_bacc</th>
<th style="text-align: right;">threshold_outgroup</th>
<th style="text-align: right;">accuracy_out</th>
<th style="text-align: left;">na_option</th>
<th style="text-align: right;">num_classes</th>
<th style="text-align: right;">num_features</th>
<th style="text-align: right;">seed</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">13</td>
<td style="text-align: right;">0.6</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.898813</td>
<td style="text-align: right;">0.6383951</td>
<td style="text-align: right;">0.898813</td>
<td style="text-align: right;">0.8749128</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.8054475</td>
<td style="text-align: right;">0.6956522</td>
<td style="text-align: right;">0.8454807</td>
<td style="text-align: right;">0.9306097</td>
<td style="text-align: right;">0.9162663</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.6258829</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.8022226</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">drop</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">12345</td>
</tr></tbody>
</table>
</div>
</div>
</section><section class="section level3"><h3 id="overview-of-classifications">Overview of classifications<a class="anchor" aria-label="anchor" href="#overview-of-classifications"></a>
</h3>
<section class="level3"><h4 id="posthoc_feature_enrichment">posthoc_feature_enrichment<a class="anchor" aria-label="anchor" href="#posthoc_feature_enrichment"></a>
</h4>
<p>Interested in the most contributing mutations per subtype? Whether it be the most frequently mutated, or the most significantly mutated via chi square subtype vs. rest? <code>posthoc_feature_enrichment</code> can help evaluate structure and potential biases in your training data. If Fisher or Chi-square test is used, bar plots and forest plots will be produced.</p>
<p><code>sample_metadata</code> Data frame containing sample metadata with class labels, by default in a column named “lymphgen”. Use <code>label_column</code> to specify a different column</p>
<p><code>features</code> Feature matrix with one row per sample and one column per mutation feature</p>
<p><code>label_column</code> Name of the column containing the class labels (default: “lymphgen”)</p>
<p><code>truth_classes</code> Vector of class labels to consider (default: c(“BN2”,“EZB”,“MCD”,“ST2”,“N1”))</p>
<p><code>method</code> Method to determine top features: “frequency” for most abundant features, “chi_square” for top differentially mutated features in the classes vs all other classes or “fisher” to compare in-class vs out-class feature frequency across all classes (default : “frequency”)</p>
<p><code>num_feats</code> Number of top features to display per subtype (default: 10)</p>
<p><code>separate_plot_per_group</code> If TRUE, creates separate plots for each group and also combines them with ggarrange (default: FALSE).</p>
<p><code>title</code> Title for the plot (default: NULL)</p>
<p><code>p_threshold</code> Maximum P value to retain (when method is fisher)</p>
<p><code>base_size</code> Base font size used (passed to theme_Morons)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plots</span><span class="op">&lt;-</span> <span class="fu"><a href="../reference/posthoc_feature_enrichment.html">posthoc_feature_enrichment</a></span><span class="op">(</span></span>
<span>  sample_metadata <span class="op">=</span> <span class="va">best_opt_model</span><span class="op">$</span><span class="va">predictions</span>,</span>
<span>  features <span class="op">=</span> <span class="va">best_opt_model</span><span class="op">$</span><span class="va">features</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"fisher"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plots</span><span class="op">$</span><span class="va">bar_plot</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="DLBCLone_optimize_params_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plots</span><span class="op">$</span><span class="va">forest_plot</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="DLBCLone_optimize_params_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section class="level3"><h4 id="basic_umap_scatterplot">basic_umap_scatterplot<a class="anchor" aria-label="anchor" href="#basic_umap_scatterplot"></a>
</h4>
<p>A more advanced plotting function for the UMAP projections. This function can also cover predicted columns of your choosing.</p>
<p><code>optimized</code> data frame containing at least V1, V2, sample_id, and grouping columns</p>
<p><code>plot_samples</code> Optional character vector of sample_id’s to label in the plot</p>
<p><code>colour_by</code> column name to color points by (default: <code>truth_column</code>)</p>
<p><code>truth_column</code> name of the truth/ground-truth column</p>
<p><code>pred_column</code> name of the predicted-class column</p>
<p><code>other_label</code> label used for the outgroup/unclassified class</p>
<p><code>title</code> plot title</p>
<p><code>use_plotly</code> if FALSE and <code>plot_samples</code> provided, draw static</p>
<p><code>custom_colours</code> custom color palette for the plot. If not provided, uses default GAMBL colors</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/basic_umap_scatterplot.html">basic_umap_scatterplot</a></span><span class="op">(</span></span>
<span>  <span class="va">best_opt_model</span><span class="op">$</span><span class="va">prediction</span>, </span>
<span>  colour_by <span class="op">=</span> <span class="st">"lymphgen"</span>,</span>
<span>  pred_column <span class="op">=</span> <span class="st">"lymphgen"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"truth"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="DLBCLone_optimize_params_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section class="level3"><h4 id="make_alluvial">make_alluvial<a class="anchor" aria-label="anchor" href="#make_alluvial"></a>
</h4>
<p>Plotting function <code>make_alluvial</code> generates detailed alluvial plots to visualize the concordance and discordance between original (e.g., Lymphgen) and predicted (e.g., DLBCLone) class assignments for samples.</p>
<p><code>optimized</code> output from DLBCLone_optimize_params function</p>
<p><code>pred_column</code> name of the column in predictions to use for the predicted class</p>
<p><code>pred_name</code> name for the predicted class column</p>
<p>DLBCLone with outgroup optimization (“wo”) w for weighted, o for optimized for other.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/make_alluvial.html">make_alluvial</a></span><span class="op">(</span><span class="va">best_opt_model</span>,pred_column <span class="op">=</span> <span class="st">"DLBCLone_wo"</span>,pred_name <span class="op">=</span> <span class="st">"DLBCLone_wo"</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="DLBCLone_optimize_params_files/figure-html/plot_alluvial2-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/basic_umap_scatterplot.html">basic_umap_scatterplot</a></span><span class="op">(</span></span>
<span>  <span class="va">best_opt_model</span><span class="op">$</span><span class="va">prediction</span>, </span>
<span>  colour_by <span class="op">=</span> <span class="st">"DLBCLone_wo"</span>,</span>
<span>  pred_column <span class="op">=</span> <span class="st">"DLBCLone_wo"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"DLBCLone_wo"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="DLBCLone_optimize_params_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section class="level3"><h4 id="dlbclone_summarize_model">DLBCLone_summarize_model<a class="anchor" aria-label="anchor" href="#dlbclone_summarize_model"></a>
</h4>
<p>Generates and saves a set of summary plots as PDF, and tables for a DLBCLone model in a preallocated folder. This summary includes; UMAP scatterplots, alluvial plots, and oncoplots.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/DLBCLone_summarize_model.html">DLBCLone_summarize_model</a></span><span class="op">(</span></span>
<span>  optimized_model <span class="op">=</span> <span class="va">best_opt_model</span>,</span>
<span>  base_name<span class="op">=</span><span class="st">"model_summaries/all_full_status"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</section></section><section class="section level2"><h2 id="example-2-optimize-for-other-false">Example 2 Optimize for other FALSE<a class="anchor" aria-label="anchor" href="#example-2-optimize-for-other-false"></a>
</h2>
<p>When looking at w for weighted, not wo for weighted and optimized for other, DLBCLone outputs its greedy search strategy, aiming to classify as many samples as possible, even at low confidence levels. This approach can reveal trends in the underlying data structure, but it also increases the risk of assigning low-confidence predicted labels.</p>
<p>DLBCLone without outgroup optimization (“w”) w for weighted.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/make_alluvial.html">make_alluvial</a></span><span class="op">(</span><span class="va">best_opt_model</span>,pred_column <span class="op">=</span> <span class="st">"DLBCLone_w"</span>,pred_name <span class="op">=</span> <span class="st">"DLBCLone_w"</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="DLBCLone_optimize_params_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/basic_umap_scatterplot.html">basic_umap_scatterplot</a></span><span class="op">(</span></span>
<span>  <span class="va">best_opt_model</span><span class="op">$</span><span class="va">prediction</span>, </span>
<span>  colour_by <span class="op">=</span> <span class="st">"DLBCLone_w"</span>,</span>
<span>  pred_column <span class="op">=</span> <span class="st">"DLBCLone_w"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"DLBCLone_w"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="DLBCLone_optimize_params_files/figure-html/unnamed-chunk-9-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section class="section level2"><h2 id="dlbclone_ensemble_postprocess">DLBCLone_ensemble_postprocess<a class="anchor" aria-label="anchor" href="#dlbclone_ensemble_postprocess"></a>
</h2>
<p>This is an optional function you can run after <code>DLBCLone_optimize_params</code>. it will post-process KNN results across K to score consistency, optionally refine classified/Other cutoffs per-class and can assign composite classes. This is a more complex approach that may yield better results but is not yet fully validated.</p>
<p><code>optimized_model</code> output of DLBCLone_optimize_params</p>
<p><code>other_min</code> for comparing across a range of K values, this is the threshold for the number of K values a sample is classified as Other for it to be re-assigned as Other. Set this to a high value if you don’t want samples to be reassigned at all</p>
<p><code>assign_composites</code> if TRUE: samples with split votes across multiple in-group classes will be assigned a composite class (e.g. “EZB/MCD”) instead of “Other”</p>
<p><code>any_split</code> if TRUE: any split among in-group votes across the Ks tested will triggers reassignment (or composite)</p>
<p><code>optimize_per_class</code> if TRUE: a range of thresholds will be tested per class to optimize the classification/Other cutoff</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">postprocess_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DLBCLone_ensemble_postprocess.html">DLBCLone_ensemble_postprocess</a></span><span class="op">(</span></span>
<span>  optimized_model <span class="op">=</span> <span class="va">best_opt_model</span>,</span>
<span>  other_min <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  assign_composites <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  any_split <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  optimize_per_class <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kostiantyn Dreval.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
